/*
 * Default parameter values
 * Can be overridden by command line (--param value) or params file (-params-file file.yml)
 */

params {
    //# Input/Output paths
    input                 = null  // Path to input VCF files (required)
    covarfile             = null  // Path to covariates file (required)
    phenofile             = null  // Path to phenotype file (required)

    //# Variable names in covariate/phenotype files
    pheno_name            = 'y'                    // Phenotype column name(s), comma-separated for multiple
    covariates            = 'SEX age_at_baseline'  // Covariate names, space-separated
    study_arm_col         = 'study_arm'            // Column defining study groups
    time_col              = 'study_days'           // Time column for survival/longitudinal analysis

    //# Analysis model selection
    longitudinal_flag     = false  // Longitudinal analysis (GALLOP)
    survival_flag         = false  // Survival analysis (Cox PH)
    linear_flag           = true   // Cross-sectional analysis (GLM)
    
    //# Processing parameters
    chunk_flag            = true   // Enable chunking of variants
    chunk_size            = 30000  // Number of variants per chunk

    //# Genetic QC parameters
    r2thres               = -9         // R2 threshold for imputation quality (-9 = disabled)
    minor_allele_freq     = '0.05'     // Minor allele frequency threshold
    minor_allele_ct       = '20'       // Minor allele count threshold
    kinship               = '0.177'    // Kinship threshold for relatedness filtering
    ancestry              = 'EUR'      // Target ancestry (EUR, AFR, EAS, SAS, AMR)
    assembly              = 'hg19'     // Genome assembly (hg19 or hg38)
    
    //# Workflow mode
    skip_pop_split        = false  // Skip population splitting: use when data is already ancestry-specific
                                   // Enables efficient LD pruning per chromosome before merge
    
    //# Dataset identifier
    dataset               = 'TEST'  // Identifier for caching results

    //# Output options
    mh_plot               = true  // Generate Manhattan plots

    //# Storage configuration
    // Storage root - can be local path or cloud bucket
    // Priority: 1) Environment variable, 2) Command line param, 3) Current directory
    STORE_ROOT            = null
    PROJECT_NAME          = null
    
    // Reference genomes directory
    reference_dir         = null
    
    // Derived paths (computed automatically)
    project_dir           = null
}

// Compute derived paths
params.STORE_ROOT = params.STORE_ROOT ?: System.getenv('STORE_ROOT') ?: "${launchDir}"
params.PROJECT_NAME = params.PROJECT_NAME ?: System.getenv('PROJECT_NAME') ?: 'unnamed_project'
params.reference_dir = params.reference_dir ?: System.getenv('REFERENCE_DIR') ?: "${params.STORE_ROOT}/References"
params.project_dir = "${params.STORE_ROOT}/${params.PROJECT_NAME}"
