/*
 * Main Nextflow Configuration
 * 
 * This file orchestrates modular configuration for different execution environments.
 * Parameters can be overridden via:
 *   1. Command line: --param value
 *   2. Params file: -params-file myparams.yml
 *   3. Environment variables
 */

// Load base configuration (reports, trace, common settings)
includeConfig 'conf/base.config'

// Load default parameters
includeConfig 'conf/params.config'

// Define profiles - each profile loads its specific configuration
profiles {
    standard {
        includeConfig 'conf/profiles/standard.config'
    }
    
    localtest {
        includeConfig 'conf/profiles/localtest.config'
    }
    
    biowulf {
        includeConfig 'conf/profiles/biowulf.config'
    }
    
    biowulflocal {
        includeConfig 'conf/profiles/biowulf.config'
        
        // Override for local execution on allocated node
        process {
            executor = 'local'
            maxForks = 2
            
            withLabel: small {
                cpus = 2
                memory = '5 GB'
            }
            withLabel: medium {
                cpus = 2
                memory = '15 GB'
            }
            withLabel: large_mem {
                cpus = 2
                memory = '50 GB'
            }
        }
    }
    
    gcb {
        includeConfig 'conf/profiles/gcb.config'
    }
    
    adwb {
        includeConfig 'conf/profiles/adwb.config'
    }
}
